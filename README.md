# AI Автоанализатор от ООО "Партерри Технолоджи Рус"

**Автоанализатор (AI Car Analyzer)** — это веб-приложение на базе Streamlit для автоматического распознавания автомобильных номерных знаков, марки, типа и цвета транспортных средств.

## Основные возможности

* **Обнаружение номерного знака**: два метода детекции — **YOLOv8** (на основе весов `utils/YOLOv8.pt`) и классический **Haar Cascade** для резервного сценария.
* **Распознавание номера**: сегментация символов и классификация с помощью CNN (модель `model.h5`).
* **Анализ российских номеров**: определение региона и примерного года выдачи через GPT-4o.
* **Распознавание марки, типа и цвета автомобиля**: использует GPT-4o (модель `gpt-4o`) через прокси API.
* **Импорт/экспорт результатов**: поддержка форматов JSON и XML.
* **Глобальная статистика**: хранение и визуализация истории распознанных номеров в сессии Streamlit.

## Структура проекта

```
app_npr.py               # Основной скрипт приложения
model.h5                 # CNN-модель для распознавания символов номера
utils/                   # Вспомогательные модули и веса YOLO
  ├── YOLOv8.pt          # Весы YOLOv8 для детекции номеров
  └── другие файлы       # (каскады, утилиты и т. д.)
haarcascade_licence_plate_rus_16stages.xml  # Каскад Хаара для распознавания номеров
requirements.txt         # Зависимости Python
README.md                # Документация проекта
```

## Установка и запуск

1. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/parterri-tech/ai-car-analyzer.git
   cd ai-car-analyzer
   ```
2. Установите зависимости (рекомендуется виртуальное окружение):

   ```bash
   python -m venv venv
   source venv/bin/activate    # Linux/MacOS
   venv\Scripts\activate     # Windows
   pip install -r requirements.txt
   ```
3. Скачайте или поместите модели:

   * `model.h5` в корне проекта
   * `utils/YOLOv8.pt` и остальные файлы в папку `utils/`
4. Запустите приложение:

   ```bash
   streamlit run app.py
   ```
5. Откройте в браузере: `http://localhost:8501`

## Конфигурация

* **Прокси OpenAI**: настроьте переменные `proxy_api_key` и `proxy_base_url` в `app.py`.
* **Метод детекции**: в интерфейсе выбирается между YOLOv8 и Haar Cascade.
* **Порог уверенности CNN**: регулируется ползунком в боковой панели.

## Использование

1. Загрузите изображение автомобиля в интерфейсе.
2. Выберите нужный формат номерного знака (Старые/Новые РФ, зарубежные).
3. Выберите задачу: распознавание номера, марки, типа, цвета или всё сразу.
4. Нажмите **Анализировать**.
5. Просмотрите результаты и при необходимости скачайте их в JSON или XML.
6. Отслеживайте историю распознаваний в разделе «Статистика».

## Вклад и поддержка

* **Разработка**: ООО «Партерри Технолоджи Рус».
* **Контакты**: [tech-support@parterri.ru](mailto:tech-support@parterri.ru)
* **Лицензия**: MIT (при необходимости изменить в `LICENSE` файле).

> Разработано с использованием технологий Streamlit, TensorFlow, OpenAI GPT-4o и Ultralytics YOLOv8.
